---
title: "Introduction to tablestylizer"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to tablestylizer}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(tablestylizer)
library(tableone)
```




# 1. Overview {#overview}

**tablestylizer** provides a set of functions designed to enhance the styling and formatting of tables in R. This package is particularly useful for making tables suitable for publication or presentation. The main functionalities of **tablestylizer** can be summarized through the following four functions:

- `stylize_tableone()`: This function processes a tableone object, which is generated by the CreateTableOne function of the tableone package. It performs various operations to make the output more suitable for publication, including converting row names to column names, transferring percentage symbols, removing unnecessary symbols, and rounding p-values. It returns a data frame representing the processed tableone object.

- `stylize_p()`: Round and format numeric values for improved readability, especially when used for p-values in statistical outputs. It avoids outputting "0.05" intentionally, as this specific value may not hold significant meaning to the reader in typical situations where the significance level (alpha) is set at 0.05.

- `stylize1()`: Stylize numeric values with custom rules aiming for 1 decimal place. It rounds values to 1 decimal place unless they round to a smaller digit, and values less than 0.001 are expressed as "<0.001".

- `stylize2()`: Stylize numeric values with custom rules aiming for 2 decimal places. It rounds values to 2 decimal places unless they round to a smaller digit, and values less than 0.001 are expressed as "<0.001".


## 1.1 Motivation

While the `tableone` package is an invaluable tool for generating nearly publication-ready tables of characteristics, some tidying up is often required before the table is ready for submission to a journal. The `tablestylizer` package addresses this need by providing functions that enhance the presentation of tables and make them more polished and publication-ready. 

Additionally, some of these functions are not limited to characteristics tables but can be applied to any tables, offering a comprehensive set of tools for users working with tabular data in R.




# 2. Example dataset with imaginary demographic data for practicing

To facilitate the exploration and application of the `stylize_tableone()` function, the **tablestylizer** package includes an example dataset. This dataset comprises fictional demographic data for a group of individuals and serves as a practical resource for users to practice and experiment with the functionalities of the `tablestylizer` package.

The example dataset is structured to simulate real-world characteristics and is used to generate tableone objects, which represent summary tables of demographic information. Users can utilize this dataset to apply the `stylize_tableone()` function and observe the improvements in the presentation and formatting of the resulting tables.

Let's begin by loading the example dataset.

```{r, echo=TRUE}
# Load the example dataset
data("tablestylizer_df", package = "tablestylizer")

# Display the head of the dataset
head(tablestylizer_df)
```

Those data can now easily be converted into a tableone object by running the following code.

```{r, echo=TRUE}
## Get variables names
dput(names(tablestylizer_df))
#c("ID", "Age", "Sex", "Height", "Likes.coffee", "Favorite.color", "Group")

## Vector of variables to summarize
myVars <- c("Age", "Sex", "Height", "Likes.coffee", "Favorite.color", "Group")

## Vector of categorical variables that need transformation
catVars <- c("Sex", "Likes.coffee", "Favorite.color", "Group")

## Create and display tableone object
CreateTableOne(vars = myVars, data = tablestylizer_df, factorVars = catVars)
```

For further practice sessions, the tableone object above has already been created and stored as `tableone_1g` dataset in the **tablestylizer** package. 


# 3. Tidying up tableone objects: stylize_tableone()

The `stylize_tableone()` function in the **tablestylizer** package is designed to enhance the presentation of tableone objects, making them more suitable for publication or presentation.

One notable modification made by `stylize_tableone()` is the repositioning of annotation text in the first column (variable names). While the `tableone` package includes annotations such as "(%)" for percentages and "(mean (SD))" for means with standard deviations in the variable column, these heavy annotations are not typically found in published manuscripts. The `stylize_tableone()` function addresses this by moving these annotations rightwards to the corresponding statistics columns.

Additionally, the `tableone` package expresses p-values with 3 digits by default. However, in many published works, p-values are commonly presented with 2 digits for brevity and clarity. The `stylize_tableone()` function strives to align with this convention, expressing p-values with 2 digits whenever possible, providing a more standardized and visually appealing format.

Users can apply `stylize_tableone()` to their tableone objects.

